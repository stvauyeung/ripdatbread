var user = {
  name: 'Peanut',
  imageUrl: '/swedish-chef.jpg',
  breadCount: 25,
  rips: 32,
  dips: 18
}

var bread1 = {
  name: 'Yummy bread',
  rips: 3,
  dips: 12,
  imageUrl: '/bread4.jpg',
  description: 'This is my favorite bread of all time.  Love this bread.',
  user: user
}

bread = angular.module('bread', ['ui.router', 'ngCookies', 'breadControllers', 'ui.bootstrap', 'Directives', 'ripDatBreadModels', 'angularFileUpload', 'breadServices']);

bread.config(['$locationProvider', '$stateProvider', function($locationProvider, $stateProvider) {
  $locationProvider.html5Mode(true);
  $stateProvider
    .state('landing', {
      url: '/',
      templateUrl: '<%= asset_path("templates/static_pages/landing.html") %>',
      controller: 'StaticHomeCtrl'
    })
    .state('newSession', {
      url: '/login',
      views: {
        'nav@': {
          templateUrl: '<%= asset_path("templates/nav_bars/side_nav.html") %>',
          controller: 'SideNavCtrl',
          resolve: {
            currentUser: ['CurrentUser', function(CurrentUser) {
              return CurrentUser.get();
            }]
          }
        },
        'main@': {
          controller: 'LoginCtrl',
          templateUrl: '<%= asset_path("templates/static_pages/login.html") %>'
        }
      }
    })
    .state('newUser', {
      url: '/users/new',
      views: {
        'nav@': {
          templateUrl: '<%= asset_path("templates/nav_bars/side_nav.html") %>',
          controller: 'SideNavCtrl'
        },
        'main@': {
          templateUrl: '<%= asset_path("templates/user/new_user.html") %>',
          controller: 'NewUserCtrl'
        }
      }
    })
    .state('userShow', {
      url: '/users/:id',
      views: {
        'nav@': {
          templateUrl: '<%= asset_path("templates/nav_bars/user_nav.html") %>',
          controller: 'UserNavCtrl',
          resolve: {
            showedUser: ['User', '$stateParams', function(User, $stateParams) {
              user = User.show($stateParams.id);
              return user;
            }],
            currentUser: ['CurrentUser', function(CurrentUser) {
              return CurrentUser.get();
            }]
          }
        },
        'main@': {
          templateUrl: '<%= asset_path("templates/user/show.html") %>',
          controller: 'UserShowCtrl',
          resolve: {
            showedUser: ['User', '$stateParams', function(User, $stateParams) {
              user = User.show($stateParams.id);
              return user;
            }]
          }
        }
      }
    })
    .state('newBread', {
      url: '/breads/new',
      views: {
        'nav@': {
          templateUrl: '<%= asset_path("templates/nav_bars/side_nav.html") %>',
          controller: 'SideNavCtrl',
          resolve: {
            currentUser: ['CurrentUser', function(CurrentUser) {
              return CurrentUser.get();
            }]
          }
        },
        'main@': {
          templateUrl: '<%= asset_path("templates/bread/new_bread.html") %>',
          controller: 'NewBreadCtrl'
        }
      }
    })
    .state('breadShow', {
      url: '/breads/:id',
      views: {
        'nav@': {
          templateUrl: '<%= asset_path("templates/nav_bars/side_nav.html") %>',
          controller: "SideNavCtrl",
          resolve: {
            currentUser: ['CurrentUser', function(CurrentUser) {
              return CurrentUser.get();
            }]
          }
        },
        'main@': {
          templateUrl: '<%= asset_path("templates/bread/show.html") %>',
          controller: 'BreadShowCtrl',
          resolve: {
            showedBread: ['Bread', '$stateParams', function(Bread, $stateParams) {
              bread = Bread.show($stateParams.id);
              return bread;
            }]
          }
        }
      }
    })
    .state('breadIndex', {
      url: '/ui/bread',
      templateUrl: '<%= asset_path("templates/ui/bread.html") %>'
    });
}]);